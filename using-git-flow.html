<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 22 Sep 2022 
 | Rendered using Bloomreach Forge Maven Skin 3.2.0 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20220922" />
              <meta http-equiv="Content-Language" content="en" />
      <title>Bloomreach Forge Documentation &#x2013; Branching and releasing with git flow</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-3.2.0.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-3.2.0.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  <link rel="icon" type="image/png" href="./images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-3.2.0.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-3.2.0.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/bloomreach-forge.github.io">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
                        <a href="https://bloomreach-forge.github.io">
        <img src="./images/skin/logo.png" alt="Bloomreach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>Bloomreach Forge Documentation</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
                            <div class="links">
      <a href="https://xmdocumentation.bloomreach.com">xmdocumentation.bloomreach.com</a>
      <a href="https://developers.bloomreach.com">developers.bloomreach.com</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 22 Sep 2022  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li>  <a href="index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="project-list.html" title="Project List">  <span class="none"></span>  Project List</a>  </li>
        <li>  <a href="development.html" title="Development">  <span class="none"></span>  Development</a>  </li>
        <li class="active">  <a href="#"><span class="none"></span>Using Git Flow</a>
  </li>
        <li>  <a href="checklist.html" title="Quality Checklist">  <span class="none"></span>  Quality Checklist</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    <div class="section">
<h2><a name="Branching_and_releasing_with_git_flow"></a>Branching and releasing with git flow</h2>
<p>We recommend to use git-flow as branching model in Bloomreach Forge projects because it is easier for most people to understand and follow and also widely accepted. This page explains how to set up <tt>git flow</tt> and how to release and deploy artifacts.</p>
<p>The instructions are based on these available references:</p>

<ul>
  
<li><a class="externalLink" href="http://danielkummer.github.io/git-flow-cheatsheet/">http://danielkummer.github.io/git-flow-cheatsheet/</a></li>
  
<li><a class="externalLink" href="https://gitversion.readthedocs.io/en/latest/git-branching-strategies/gitflow-examples/">https://gitversion.readthedocs.io/en/latest/git-branching-strategies/gitflow-examples/</a></li>
  
<li><a class="externalLink" href="http://nvie.com/posts/a-successful-git-branching-model/">http://nvie.com/posts/a-successful-git-branching-model/</a></li>
</ul>
<div class="section">
<h3><a name="Git_flow_set-up"></a>Git flow set-up</h3>
<p>In order to use <tt>git flow</tt> in your local workspace folder, do the following first, once:</p>

<ul>
  
<li>Have two branches, <tt>master</tt> and <tt>develop</tt>, in prior.</li>
  
<li>Initialize your working space once for the first time by running <tt>git flow init</tt> and accepting the default settings.</li>
  
<li>It is recommended to set the default branch to <tt>develop</tt>. Change the settings of the project to change the default branch to <tt>develop</tt>.</li>
</ul>
<p>After an initial release, the &#x2018;master&#x2019; branch is always the same as the latest tag, whilst the &#x2018;develop&#x2019; branch, and possibly &#x2018;support/x.y&#x2019; branches, are used as base for features and bug fixes. </p></div>
<div class="section">
<h3><a name="Maintenance_support_branches"></a>Maintenance support branches</h3>
<p>If you want to have maintenance branches supporting older versions, you can use <tt>git flow support</tt> subcommand. You create it from a tag or a commit hash.</p>

<div class="source">
<div class="source"><pre>git flow support start x.y tag-x.y.z
</pre></div></div>
<p>The above creates a branch <tt>support/x.y</tt> from a tag called &#x2018;tag-x.y.z&#x2019;. So for instance, if develop is on 2.0.0-SNAPSHOT, and you want to create a support branch for the 1.x range, you can create a support/1.x branch from latest tag 1.5.0.</p>
<p>Git flow is only about branching so you must set the correct SNAPSHOT versions manually and commit, push it. </p></div>
<div class="section">
<h3><a name="How_to_release_with_git_flow_1_minute_version"></a>How to release with git flow, 1 minute version</h3>
<p>From develop (or from support/x.y) branch, create release x.y.z: </p>

<ol style="list-style-type: decimal">
  
<li>Start: <tt>git flow release start x.y.z develop</tt> (or from <tt>support/x.y</tt>)</li>
  
<li>Set release version: <tt>mvn versions:set -DnewVersion=&quot;x.y.z&quot;</tt>, also for demo.</li>
  
<li>Commit: <tt>git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: set version&quot;</tt></li>
  
<li>Finish: <tt>git flow release finish x.y.x</tt></li>
  
<li>Set next version: <tt>mvn versions:set -DnewVersion=&quot;x.y.z+1-SNAPSHOT&quot;</tt>, also for demo.</li>
  
<li>Commit: <tt>git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: set next development version&quot;</tt></li>
  
<li>Push: <tt>git push origin develop</tt> (or <tt>support/x.y</tt>)</li>
</ol>
<p>When started from <tt>develop</tt>, <tt>master</tt> is now same as the release. Then from master:</p>

<ol style="list-style-type: decimal">
  
<li>Regenerate docs: usually <tt>mvn clean site -Pgithub.pages</tt></li>
  
<li>Commit: <tt>git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: regenerate docs&quot;</tt></li>
  
<li>Push: <tt>git push origin master</tt></li>
</ol>
<p>Push the tag &amp; deploy artifacts:</p>

<ol style="list-style-type: decimal">
  
<li>Push: <tt>git push origin x.y.z</tt></li>
  
<li>Check out: <tt>git checkout tags/x.y.z</tt></li>
  
<li>Deploy artifacts: <tt>mvn deploy</tt></li>
</ol></div>
<div class="section">
<h3><a name="How_to_release_with_git_flow_detailed_version"></a>How to release with git flow, detailed version</h3>
<div class="section">
<div class="section">
<h5><a name="Start_a_new_release"></a>Start a new release</h5>
<p>With <tt>git flow release start</tt> a release branch is created. You can do that from <tt>develop</tt> branch (as in the this example) but also from <tt>support/x.y</tt> branch.</p>

<div class="source">
<div class="source"><pre>    git flow release start x.y.z develop
</pre></div></div>
<p>Now, you&#x2019;re automatically moved to a new branch already, <tt>release/x.y.z</tt>.</p></div>
<div class="section">
<h5><a name="Set_release_versions"></a>Set release versions</h5>
<p>It&#x2019;s time to set a proper release version in the pom.xml files. For example,</p>

<div class="source">
<div class="source"><pre>    mvn versions:set -DgenerateBackupPoms=false -DnewVersion=&quot;x.y.z&quot;
</pre></div></div>
<p>Also, if you have <tt>demo</tt> folder underneath, set the release version in the demo folder as well:</p>

<div class="source">
<div class="source"><pre>    cd demo
    mvn versions:set -DgenerateBackupPoms=false -DnewVersion=&quot;x.y.z&quot;
    cd ..
</pre></div></div>
<p><b>NOTE</b>: <tt>demo</tt> is a child folder managed in the same git repository, but not a maven submodule.  That&#x2019;s why you set the maven versions separately.</p>
<p>Let&#x2019;s commit the version changes. For example,</p>

<div class="source">
<div class="source"><pre>    git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: set version&quot;
</pre></div></div></div>
<div class="section">
<h5><a name="aOptionally_publish_the_release_branch"></a>(Optionally) publish the release branch</h5>
<p>You can skip this step if you are releasing it alone, but if you want your team to do final hardening in the shared release branch, you should do this step.</p>

<div class="source">
<div class="source"><pre>    git flow release publish x.y.z
</pre></div></div>
<p>Now, your release branch was published. You can inform the team of this new release branch for final hardening work.</p></div>
<div class="section">
<h5><a name="Finish_the_release"></a>Finish the release</h5>
<p>Finally, let&#x2019;s finish the release. This step includes making a tag, merging changes to master and develop branches and removing the release branch.</p>

<div class="source">
<div class="source"><pre>    git flow release finish x.y.z
</pre></div></div>
<p>This finishing step removes the <tt>release/x.y.z</tt> branch <i>locally</i>, and moves to <tt>develop</tt> branch.</p></div>
<div class="section">
<h5><a name="Bump_version_in_develop_branch_and_push_it."></a>Bump version in develop branch and push it.</h5>
<p>In the finishing step above, every change was already merged to <tt>master</tt> and <tt>develop</tt> branch from the release branch. So, don&#x2019;t forget to push local commits to the remote.</p>
<p>Before pushing the commits in <tt>develop</tt> branch, let&#x2019;s bump the version for next development cycle with <tt>-SNAPSHOT</tt> in <tt>develop</tt> branch.</p>

<div class="source">
<div class="source"><pre>    mvn versions:set -DgenerateBackupPoms=false -DnewVersion=&quot;x.y.z+1-SNAPSHOT&quot;
</pre></div></div>
<p>Again, don&#x2019;t forget bumping up versions in the demo folder if it exists.</p>

<div class="source">
<div class="source"><pre>    cd demo
    mvn versions:set -DgenerateBackupPoms=false -DnewVersion=&quot;x.y.z+1-SNAPSHOT&quot;

    cd ..
    git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: set next development version&quot;

    git push origin develop
</pre></div></div></div>
<div class="section">
<h5><a name="Push_master_branch."></a>Push master branch.</h5>
<p>If the release was done from develop branch, not from support branch, <tt>master</tt> should be the same as the release branch. Next is to generate docs (if applicable) and commit, push.</p>

<div class="source">
<div class="source"><pre>    git checkout master
    mvn clean site -Pgithub.pages
    git commit -a -m &quot;&lt;ISSUE_ID&gt; releasing x.y.z: regenerate docs&quot;```
    git push origin master
</pre></div></div></div>
<div class="section">
<h5><a name="Push_the_newly_created_tag."></a>Push the newly created tag.</h5>
<p>In the finishing step, a tag was made for the release version. e.g, <tt>x.y.z</tt></p>
<p>You can check all the tags by the following command:</p>

<div class="source">
<div class="source"><pre>    git tag -l
</pre></div></div>
<p><b>Tip</b>: You can also run the following command to fetch all the tags pushed by someone else in the remote:</p>

<div class="source">
<div class="source"><pre>    git fetch --all --tags --prune
</pre></div></div>
<p>Now, let&#x2019;s push the newly created tag generated in the finishing step:</p>

<div class="source">
<div class="source"><pre>    git push origin x.y.z
</pre></div></div>
<p>If you&#x2019;ve published the release branch in the previous optional step, you may now remove the remote (temporary) release branch:</p>

<div class="source">
<div class="source"><pre>    git push origin --delete release/x.y.z
</pre></div></div>
<p>Now, your normal release process is done. Your new release was made as a tag and published.</p></div>
<div class="section">
<h5><a name="Deploy_the_release_tag_to_Bloomreach_Forge_Maven_Repository"></a>Deploy the release tag to Bloomreach Forge Maven Repository</h5>
<p>Check out the release tag like the following example. You may name the local branch to anything else.</p>

<div class="source">
<div class="source"><pre>    git checkout tags/x.y.z -b tag-x.y.z
</pre></div></div>
<p>Now, deploy it to Bloomreach Forge Maven repository from the tag branch:</p>

<div class="source">
<div class="source"><pre>    mvn deploy
</pre></div></div>
<p>You may remove the local tag branch.</p>

<div class="source">
<div class="source"><pre>    git checkout develop
    git branch -D tag-x.y.z
</pre></div></div>
<p>Congratulations! Great work!</p></div></div></div></div>
    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2017&#x2013;2022.
          <a href="https://www.bloomreach.com">Bloomreach Inc.</a>.
      
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

